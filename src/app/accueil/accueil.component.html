<app-header></app-header>  
<div class="row">           
    <mat-sidenav-container class="example-container">
            <mat-sidenav #sidenav id="sidNavCategories" mode="side" opened>
                <button mat-icon-button *ngIf="sidenav.opened" (click)="sidenav.close()"><mat-icon>close</mat-icon></button>
                <div>
                    <mat-tree [dataSource]="nestedDataSource" [treeControl]="nestedTreeControl" class="example-tree">
                        <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
                            <li class="mat-tree-node">
                                <button mat-icon-button (click)="onSelectNode(node)"></button>
                                {{node.filename}}
                            </li>
                        </mat-tree-node>                      
                        <mat-nested-tree-node *matTreeNodeDef="let node; when: hasNestedChild">
                            <li>
                                <div class="mat-tree-node">
                                    <button mat-icon-button matTreeNodeToggle
                                            [attr.aria-label]="'toggle ' + node.filename">
                                        <mat-icon class="mat-icon-rtl-mirror" *ngIf="node.children">
                                            {{nestedTreeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
                                        </mat-icon>
                                    </button>
                                    <button mat-button (click)="onSelectNode(node)">{{node.filename}}</button>
                                </div>
                                <ul [class.example-tree-invisible]="!nestedTreeControl.isExpanded(node)">
                                    <ng-container matTreeNodeOutlet></ng-container>
                                </ul>
                            </li>
                        </mat-nested-tree-node>
                    </mat-tree>
                </div>                    
            </mat-sidenav>
            <mat-sidenav-content> 
                <button mat-icon-button *ngIf="!sidenav.opened" (click)="sidenav.open()" class="sidenavButton"><mat-icon>add</mat-icon></button>             
                <input matInput id="search" (keyup)="applyFilter($event.target.value)" placeholder="Rechercher">
                <div id="listPosts">
                    <button mat-button class="post" (click)="addPost()" *ngIf="postService.canEdit()">
                        <div>
                            <h4><mat-icon>add</mat-icon></h4>
                        </div>
                        <div>
                            <p>Ajouter un post</p>
                        </div>    
                    </button> 
                    <div *ngFor="let post of posts;">
                        <button mat-button class="post" (click)="openPost(post)" *ngIf="!nodeSelected.id || (post.categorie.id == nodeSelected.id)">
                            <div>
                                <h4>{{post.titre}}</h4>
                                <p>Dog Breed</p>
                            </div>
                            <div>
                                <p>{{post.description}}</p>
                            </div>
                            <div class="postFooter">
                                <button mat-icon-button (click)="onLike(post)">{{post.nbLike}}<mat-icon >thumb_up</mat-icon></button>
                                <button mat-icon-button><mat-icon>comment</mat-icon></button>
                                <button mat-icon-button *ngIf="postService.canDelete()" (click)="onDelete(post)"><mat-icon>close</mat-icon></button>
                            </div>     
                        </button>     
                    </div>                                              
                </div>
            </mat-sidenav-content>
    </mat-sidenav-container>
</div>
